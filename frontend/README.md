# №1 Деление Mesto на микрофронтенды

### Обоснование

Для разбиения монолитного микрофронтенда использую Webpack Module Federation, т.к. весь проект написан на одном фреймворке (библиотеке) - React.  
  
Всего получилось разбить на 3 МФ - 
- host, 
- аутентификация, 
- профиль пользователя  

При разбивке функционала старался придерживаться DDD, то есть делить приложение на предметные области.  

Изначально считал допустимым также изолировать функционал 1) сбора и учета лайков 2) добавления и удаления карточек.  
Однако я посчитал, что этот функционал невелик, а в случае с удалением карточек еще и взаимосвязан непосредственно с карточкой места. Из Card выделять отдельный компонент для удаления, чтобы выделить это в отдельный МФ. Как будто рефакторинг ради рефакторинга. Не увидел также необходимости по причине возможного масштабирования, в связи с этим остановился на 3-х указанных микрофронтах.   

-----
# 1. Микрофронтенд основной функциональности

**Описание**: Ядро приложения, которое отображает фотогалерею, управляет загрузкой новых фотографий, удалением существующих, ведет учёт лайков и связывает другие микрофронтенды.

### Компоненты:
- `Main`: Отображает фотогалерею и обрабатывает взаимодействие с пользователем
- `Card`: Отображает отдельную фотографию/карточку с возможностью лайка
- `Footer`: Отображает нижний колонтитул приложения
- `AddPlacePopup`: Форма для добавления новой фотографии/карточки
- `ImagePopup`: Отображает полноразмерное изображение при клике на карточку
- `ProtectedRoute`: Обеспечивает доступ к маршрутам только для аутентифицированных пользователей.

### Маршрутизация:
- Использует `react-router-dom` для навигации между маршрутами.

### Методы API (`utils/api.js`):
- **handleCardLike**: Переключает статус лайка на карточке
- **getCardList**: Получает список карточек
- **handleAddPlaceSubmit**: Добавляет новую карточку
- **handleCardDelete**: Удаляет карточку

### Функциональность:
#### Отображение фотографий:
- Рендерит список карточек/фотографий из состояния `cards`.

#### Взаимодействие с карточками:
- Обрабатывает клики на карточках для открытия `ImagePopup`.

#### Добавление фотографии:
- Отправляет данные новой фотографии на API.
- Добавляет новую карточку в начало массива `cards`.

#### Удаление фотографии:
- Отправляет запрос на удаление карточки на API.
- Удаляет карточку из массива `cards`.

#### Управление всплывающими окнами:
- Контролирует открытие и закрытие различных попапов.

#### Проверка аутентификации:
- Перенаправляет неаутентифицированных пользователей на страницу входа.

#### Переключение лайка:
- Проверяет, поставил ли текущий пользователь лайк на карточке.
- Отправляет запрос на API для установки или снятия лайка.
- Обновляет данные лайков карточки в состоянии.

### Компоненты для remotes:
- `PopupWithForm`


-----

# 2. Микрофронтенд аутентификации

**Описание**: Отвечает за процессы регистрации и входа пользователей.

### Компоненты:
- `Register`: Форма регистрации новых пользователей
- `Login`: Форма входа для существующих пользователей
- `InfoTooltip`: Отображает сообщения об успешной или неудачной аутентификации

### Методы API (`utils/auth.js`)
- `register`
- `login`
- `checkToken`

### Стили (`blocks/`)
- `auht-form`
- `login`

### Иконки (`images/`)
- `error-icon`
- `success-icon`


-------

## 3. Микрофронтенд профиля пользователя

**Описание**: Управляет информацией профиля пользователя, включая просмотр и обновление данных профиля и аватара.

### Компоненты:
- `EditProfilePopup`: Форма для редактирования информации профиля (имя, описание)
- `EditAvatarPopup`: Форма для обновления аватара пользователя
- `Header`: Отображает email пользователя и предоставляет опцию выхода

### Функциональность:
#### Обновление профиля (`handleUpdateUser` функция):
- Отправляет обновленную информацию пользователя на API.
- Обновляет состояние `currentUser` с новыми данными.

#### Обновление аватара (`handleUpdateAvatar` функция):
- Отправляет новый URL аватара на API.
- Обновляет состояние `currentUser` с новым аватаром.

#### Выход из системы (`onSignOut` функция):
- Очищает токены аутентификации.
- Сбрасывает состояние аутентификации.
- Перенаправляет на страницу входа.

### Методы API:
- getUserInfo
- setUserInfo
- setUserAvatar

### Стили (`blocks/`)
- `header`

### Иконки (`images/`)
- `logo`


# №2 Декомпозиция монолита на микросервисы

### Ссылка: https://drive.google.com/file/d/1fXSFvh9srnSmeONKVHzpZ8HFw5HDcoLj/view?usp=sharing